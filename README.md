# Rapidâš¡

åŸºäº `Electron`, `Electron-Vite`, `pnpm` `monorepo` å»ºç«‹çš„æ¡Œé¢ç«¯åº”ç”¨ç¨‹åºã€‚

ğŸŒŸğŸŒŸğŸŒŸä¸»è¿›ç¨‹é‡‡ç”¨äº† `Typescript` å®éªŒæ€§è¯­æ³•è£…é¥°å™¨ï¼Œå»ºç«‹ `Ipc` é€šé“ä»¥åŠæ‰“é€ æ—¥å¿—ç³»ç»Ÿï¼Œå»ºç«‹äº†å¼‚å¸¸è‡ªåŠ¨æ•æ‰å¤„ç†æœºåˆ¶ã€‚æ¸²æŸ“è¿›ç¨‹é‡‡ç”¨äº† `vue`ä½œä¸ºå¼€å‘æ¡†æ¶ï¼Œç¼–å†™é¡µé¢å±•ç¤º Webã€‚

æœ¬é¡¹ç›®å¼€å‘æ˜¯ä¸ºç¼–å†™ä¸€å¥—å¿«é€Ÿè¿­ä»£æ¡Œé¢åº”ç”¨ç¨‹åºçš„ç¤ºä¾‹ï¼Œç¼–å†™é¡¹ç›®å¿«é€Ÿå¯åŠ¨ç¼–å†™çš„æ¡†æ¶ã€‚ä½†å› ä¸ºå¯¹å¼€å‘å®é™…æƒ…å†µçš„å¤šæ ·æ€§çš„æ¬ ç¼ºï¼Œæ‰€ä»¥å¼€å‘äº†ä¸€æ¬¾æµç¨‹å›¾ç»˜åˆ¶(2D)ç¨‹åºä½œä¸ºå¼€å‘è¿‡ç¨‹æ€è·¯çš„æä¾›ã€‚

æœ¬é¡¹ç›®å¯ä¾›æ¨¡æ¿æ”¯æŒï¼Œå¼€å‘åŸºç¡€å’Œæ€è·¯æ”¯æŒï¼Œä½†è¯·å‹¿ç›´æ¥ä½¿ç”¨ã€‚

## Introduce

æœ¬é¡¹ç›®ä¸­å«æœ‰ä¸¤ä¸ªå¯ä»¥è¿è¡Œçš„é¡¹ç›®ï¼Œå…¶ä¸­åŒ…æ‹¬æ¡Œé¢åº”ç”¨ç¨‹åºå¤–è¿˜åŒ…æ‹¬æ¡Œé¢åº”ç”¨ç¨‹åºçš„ä¸‹è½½å®˜ç½‘ï¼Œä½†ç›®å‰éƒ½è¿˜åœ¨æ„å»ºå½“ä¸­...

å¦‚æœæœ‰éœ€è¦å¿«é€Ÿå¼€å‘æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œå¯ä»¥å°è¯• clone æœ¬é¡¹ç›®ï¼Œå¹¶å¯¹å…¶ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œå¯ä»¥è¾¾åˆ°å¸®åŠ©å¿«é€Ÿå¼€å‘æ„å»ºçš„ä½œç”¨ã€‚

æœ¬é¡¹ç›®å½“ä¸­é‡‡ç”¨äº† `monorepo` è¿›è¡Œé¡¹ç›®çš„ç¼–å†™ï¼Œå…¶ä¸­

ğŸŒ±`/package/config` ä¸ºä¸¤ä¸ªé¡¹ç›®çš„é…ç½®(åŒ…å«æ„å»ºé…ç½®ä»¥åŠè¿è¡Œæ—¶é…ç½®ï¼Œä»¥åŠä¸€äº›æ„å»ºå¸¸é‡ï¼Œä¾‹å¦‚å½“å‰ç¯å¢ƒï¼ŒIS_DEVï¼Œå½“å‰æ„å»ºå¹³å°ï¼ŒIS_WINDOWSç­‰ç­‰)ï¼Œçœ‹è¿‡ä»£ç ä¹‹åï¼Œå°±å¯ä»¥éšæ„çš„ç¼–å†™ä½ æƒ³è¦çš„é…ç½®å¸¸é‡ï¼Œæ·»åŠ æƒ³è¦çš„æ„å»ºå¹³å°å’Œä¸€äº›é€‰é¡¹ã€‚è¿™äº›å¸¸é‡é€‰é¡¹ï¼ŒIS_XXXï¼Œé€šå¸¸ä¼šåœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œå› æ­¤ï¼Œé€šè¿‡ Vite åšåˆ°æ ‘æ‘‡ï¼Œå¯ä»¥åˆ©ç”¨æ­¤æ–¹æ¡ˆå¯ä»¥æ„å»º Web `OEM` æ–¹æ¡ˆã€‚

ğŸŒ±`/package/desktop-node`åˆ™æ˜¯å¯¹åº” `Electron` ç¨‹åºçš„ä¸»è¿›ç¨‹ã€‚

ğŸŒ±`/package/desktop-web`åˆ™æ˜¯å¯¹åº” `Electron` ç¨‹åºçš„æ¸²æŸ“è¿›ç¨‹ã€‚åŸºäº `Vue` ç¼–å†™ï¼Œå…·æœ‰å¤šå…¥å£ã€‚

ğŸŒ±`/package/website`åˆ™æ˜¯åŸºäº `React`ç¼–å†™çš„ä¸‹è½½ç½‘ç«™ï¼Œä½¿ç”¨äº† `styled-components`ï¼Œ`scss module`ï¼Œè¡Œå†…æ ·å¼ï¼Œè™½ç„¶éƒ½é‡‡ç”¨äº†ä½†æ˜¯ä¸ºå…¶åˆ†äº†ä½¿ç”¨ç±»åˆ«ï¼Œ`styled-components`å»ºç«‹åŸºæœ¬å…ƒç´ å®¹å™¨ï¼Œ`scss module`ç¼–å†™é¡µé¢ç»„ä»¶çº§æ ·å¼ï¼Œè¡Œå†…æ ·å¼åˆ™æ˜¯ä¸ºäº†è¦†ç›–å…ƒç´ å®¹å™¨åŸæœ‰æ ·å¼ï¼Œåˆæˆ–è€…æ ·å¼ç®€çŸ­ã€‚ç”±äºå—åˆ° `Vue`å¼€å‘çš„å½±å“ï¼Œ`useState` çš„ æ‰‹åŠ¨`set`å·²ç»ä¸èƒ½æ»¡è¶³äºæˆ‘ï¼Œäºæ˜¯ç¼–å†™äº†ä¸€ä¸ªç±»ä¼¼ `Vue`å¼€å‘çš„è‡ªåŠ¨ `set` çš„ `hook`ï¼Œå…·ä½“é˜è¿°è‡ªè¡ŒæŸ¥çœ‹ `hooks`æ–‡ä»¶å¤¹ã€‚

ğŸ‘‹ğŸ‘‹å…³äºæ›´å¤šè¯¦ç»†ï¼Œåç»­å®Œå–„å¼€å‘ä¹‹åä¼šå»ºç«‹ `Vitepress`ä»‹ç»æ–‡æ¡£å¯¹å…¶è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œä»¥è®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿäº†è§£å¼€å‘åŸºæœ¬ã€‚

åç»­ä¼šéƒ¨ç½²åœ¨ https://www.oupro.cn

## Preface

æƒ³è¦äº†è§£æœ¬é¡¹ç›®, å¹¶å…·æœ‰æ”¹é€ å’Œä¿®æ­£å’Œæ‰©å±•èƒ½åŠ›, ä½ åº”è¯¥å…·æœ‰å¦‚ä¸‹åŸºæœ¬æ¦‚å¿µï¼š

- pnpm monorepo ä¾èµ–å®‰è£…å’Œç®¡ç†

- Nodejs å¯¹æœ¬åœ°æ–‡ä»¶çš„åŸºæœ¬æ“ä½œèƒ½åŠ›

- Pako çš„åŸºæœ¬è®¤çŸ¥

- Javascript ç±»ç¼–ç¨‹

- Electron åŸºæœ¬çŸ¥è¯†æ¦‚å¿µ

- Typescript ç±»å‹è¿ç®—åŸºæœ¬èƒ½åŠ›

- è£…é¥°å™¨é›†æˆä»¥åŠ Reflect-metadata åŸºæœ¬æ¦‚å¿µ

- Vue.js Vite æ„å»º Web / React ä¹Ÿè¡Œï¼Œ ä»¥åŠ Vite æ ‘æ‘‡çš„å½¢æˆï¼Œå˜é‡æ³¨å…¥

## Project Setup

### Install

```bash
$ pnpm install
```

å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·é¦–å…ˆè¯·æ£€æŸ¥ä½ çš„æºæ˜¯å¦ä¸ºå®˜æ–¹æºï¼Œä¸å»ºè®®ä½¿ç”¨å…¶ä»–æºã€‚

å¦‚æœä½ å­˜åœ¨ä¸ npm ä»“åº“è¿æ¥ä¸ç¨³å®šçš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š`pnpm will retry in 10 seconds 2 retries left`

é‚£ä¹ˆä½ å¯èƒ½éœ€è¦å¦‚ä¸‹è½¯ä»¶åœ°å€ã€‚

[Clash](https://www.clash.la/releases/)

[Proxifier - The Most Advanced Proxy Client](https://www.proxifier.com/)

å½“ä½ é…ç½®å®Œæˆä½ çš„ä»£ç†ä¹‹åï¼Œå†é‡è¯•ã€‚

### Development

```bash
$ pnpm dev
$ pnpm website:dev
$ pnpm scripts:dev
```

### Build

```bash
# For windows
$ pnpm build:win
$ pnpm build:win:only # å¦‚æœä¸éœ€è¦æ‰§è¡Œç±»å‹æ£€æŸ¥å’Œä¸€äº›é¢å¤–çš„å‘½ä»¤ï¼Œé‚£ä¹ˆç›´æ¥æ„å»º

# For macOS
# æœªé€‚é…
$ pnpm build:mac

# For Linux
# æœªé€‚é…
$ pnpm build:linux
```

# More

TypeScript éµå¾ªç¼–å†™è§„èŒƒ

```typescript
// 0,
import './xxx';
// 1ï¼Œå…ˆå¼•å…¥å…·åå¯¼å…¥, å¦‚æœå¼•å…¥ç±»å‹åˆ™æ·»åŠ  type å¼•å…¥
import { name, Name } from 'xxx';
import type { Name } from 'xxx';
import { type Name } from 'xxx';
// 2ï¼Œå¼•å…¥é»˜è®¤å¯¼å…¥ï¼Œå¦‚æœé»˜è®¤å¯¼å‡ºæ˜¯ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆå¯¹äºå¤§é©¼å³°
import name from 'xxx';
import Name from 'xxx';
// 3ï¼Œæœ€åå¼•å…¥ import * ç±»å‹
import * as xxx from 'xxx';

// ç±»å‹ä¹¦å†™é‡‡ç”¨å¤§é©¼å³°
type Name = number;
interface Name {

}

// å‡½æ•°ä¹¦å†™é‡‡ç”¨å°é©¼å³°
// å°½å¯èƒ½åœ°åˆ©ç”¨ TS ç±»å‹æ¨å¯¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¹¦å†™ç±»å‹æ³¨é‡Š(å¦‚æœæœ‰è¿™ç§åˆ‡å®éœ€æ±‚)
const fn = () => {};
function fn<T>(arg: T) {}

if () {
  xxx;
}
else if () {
  xxx;
}
else {
  xxx;
}

// å¦‚æœè¯­å¥ç®€æ´ï¼Œé‚£ä¹ˆä¸€è¡Œä¹¦å†™å®Œæ•´ï¼Œä¿æŒæ•´ä½“ä»£ç å—ç®€æ´æ˜äº†
// å°½é‡é¿å… if () { xxx; } è¿™ç§è¯­å¥(ä¸€è¡Œ)åœ°ç¼–å†™ã€‚
if () xxx;
else if () xxxx;
else xxx;

// é¿å…æ­¤æƒ…å†µåœ°äº§ç”Ÿï¼Œå¦‚æœéœ€è¦å°±ä½¿ç”¨ as æ–­è¨€
// é¿å…ä½¿ç”¨ @ts-ignore ç­‰å¿½ç•¥é”™è¯¯
// å½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åº”è¯¥å­˜åœ¨çš„é”™è¯¯ç¤ºä¾‹
const a: number = '1' as unknown as number;
```

Vue ç»„ä»¶éµå¾ªç¼–å†™è§„èŒƒï¼š

ç»„ä»¶æ–‡ä»¶åå¤§é©¼å³°æ ‡è¯†ï¼Œé™¤éæ˜¯ index.vue

```vue
<template>
  <!-- ç±»åå¯èƒ½ä¼šå‡ºç°çŸ­æ¨ªçº¿æˆ–è€…é©¼å³°å‘½åï¼Œ1çŸ­æ¨ªçº¿ä¸ºå…¨å±€çš„ç±»åï¼Œ2é©¼å³°ä¸ºå±€éƒ¨çš„ç±»å -->
  <ASpace class="test-title testTitle">
    <span>ç»„ä»¶åå¤§é©¼å³°</span>
    <span style="color: red;">å±æ€§åå°é©¼å³°ï¼Œé¿å…ä½¿ç”¨çŸ­æ¨ªçº¿æ–¹å¼</span>
  </ASpace>
</template>

<script lang="ts" setup>
// å…ˆå¯¼å…¥ï¼Œå‚ç…§ typescript
import { ref } from 'vue';
import Vue from 'vue';
import * xxx from 'xxx';

// ç¼–å†™ propsï¼Œ emits ç­‰
const props = defineProps({
  mode: { type: String, default: '' },
  list: { type: Array as PropType<string[]>, default: () => ([]) }
});
const emits = defineEmits(['click']);

// è°ƒç”¨æ‹¥æœ‰è¿”å›å€¼å¹¶ä¸”éœ€è¦æå‰å®šä¹‰çš„ hooks
const router = useRouter();
const route = useRoute();
const store = useStore();

// å®šä¹‰å¸¸é‡ï¼Œå˜é‡
const list = ref([]);

// æŸäº› hook çš„è°ƒç”¨
const { modalAllAttrs } = useModal({});
const { tableAttrs } = useTable({});
const { validateMessage, validateStatus, validateFn } = useValidate((value: string) => {

});

// å®šä¹‰å¤ç”¨å‹å‡½æ•°
const xxx = () => {

}

// å®šä¹‰é¡µé¢å‡½æ•°åŠ¨ä½œ, ä¾‹å¦‚éœ€è¦è¢«ç»‘å®šåˆ°é¡µé¢ä¸Šçš„å‡½æ•°
const add = () => {

};

// æŸäº› hook çš„è°ƒç”¨
useFadeIn(() => { // é¡µé¢è½¬åœº

})
useEventListener(document.body, () => { // æ·»åŠ äº‹ä»¶

})

// æŒ‰é¡ºåºè°ƒç”¨ç”Ÿå‘½å‘¨æœŸ
onBeforeMounted(() => {

})

onMounted(() => {

})


// è·Ÿé¡µé¢å…³ç³»æ¯”è¾ƒå¤§çš„ç›‘å¬ï¼Œå¦‚æœç›‘å¬ä»…é’ˆå¯¹æŸä¸ªå˜é‡ï¼Œå¹¶ä¸”å‰¯ä½œç”¨è¾ƒä½ï¼Œåˆ™ç›´æ¥ä¹¦å†™åœ¨å˜é‡çš„åæ–¹
watch(() => , {

});

// é¡µé¢å®šä¹‰çš„å¿«æ·é”®
useMousetrap();

// å®šä¹‰ç»„ä»¶çš„å¯¼å‡ºå·¥ä½œ
defineExpose({

})
</script>
```
